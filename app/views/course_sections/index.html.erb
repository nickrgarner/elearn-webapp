<p id="notice"><%= notice %></p>

<h1>Course Sections</h1>

<table>
  <thead>
    <tr>
      <th>Course Name</th>
      <th>Teacher</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @course.course_sections.each do |course_section| %>
      <tr>
        <td><%= @course.name %></td>
        <td><%= course_section.teacher.profile.name %></td>
        <% if current_user.userable_type.to_str == "Student"%>
          <% if current_user.userable.cart.cart_objects.where(cart_id: current_user.userable.cart.id, course_section_id: course_section.id).any?%>
            <td><%= button_to 'Remove from Cart', student_cart_remove_path(current_user.userable.id), params: {course_section_id: course_section} %></td>
          <% else %>
            <td><%= button_to 'Add to Cart', student_cart_add_path(current_user.userable.id), params: {course_section_id: course_section} %></td>
          <% end %>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<% if current_user.userable_type.to_s == "Admin"%>
  <%= link_to 'Create Course Section', new_course_course_section_path %> |
<% end %>
<%= link_to 'View Course', course_path(@course) %> |
<%= link_to 'View Courses', courses_path %> |
<%= link_to 'Home', home_path %>