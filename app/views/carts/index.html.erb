<p id="notice"><%= notice %></p>

<h1>Cart</h1>

<table>
  <thead>
  <tr>
    <th>Course Name</th>
    <th>Course Section</th>
    <th>Price</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @cart.cart_objects.each do |cart_object| %>
    <tr>
      <td><%= cart_object.course_section.course.name %></td>
      <td><%= cart_object.course_section.id %></td>
      <td><%= cart_object.course_section.course.price %></td>
      <td><%= button_to 'Remove from Cart', student_cart_remove_path(current_user.userable.id), params: {course_section_id: cart_object.course_section, link: student_carts_path(current_user.userable)} %></td>
    </tr>
  <% end %>
  <% if CartObject.where(cart_id: current_user.userable.cart.id).any? == true && @current_user.userable.credit_card != nil%>
    <td><b>Total:</b></td>
    <td></td>
    <td><%= @cart.total %></td>
  <% end %>
  </tbody>
</table>

<% if CartObject.where(cart_id: current_user.userable.cart.id).any? == true && @current_user.userable.credit_card != nil%>
  <%= button_to 'Checkout', student_checkout_path(current_user.userable), params: {course_section_id: 0, link: student_carts_path(current_user.userable)}, data: { confirm: 'Are you sure?' } %>
<% end %>
<br>
<% if @current_user.userable.credit_card == nil%>
  <%= link_to 'Add Credit Card', new_student_credit_card_path(@student) %> |
<% end %>
<%= link_to 'Home', home_path %>
